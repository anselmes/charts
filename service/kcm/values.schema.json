{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "flux": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "helmController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            },
            "container": {
              "type": "object",
              "properties": {
                "additionalArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "kustomizeController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            },
            "container": {
              "type": "object",
              "properties": {
                "additionalArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "sourceController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            },
            "container": {
              "type": "object",
              "properties": {
                "additionalArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "imageAutomationController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          }
        },
        "imageReflectionController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          }
        },
        "notificationController": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          }
        },
        "policies": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          }
        }
      }
    },
    "repositories": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "required": ["name", "url"]
      }
    },
    "gwapi": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
            },
            "annotations": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "certmanager": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "enableCertificateOwnerRef": {
          "type": "boolean"
        }
      }
    },
    "kcm": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["enterprise", "community"]
        },
        "replicas": {
          "type": "integer",
          "minimum": 1
        },
        "repository": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          }
        },
        "release": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          }
        },
        "controller": {
          "type": "object",
          "properties": {
            "createAccessManagement": {
              "type": "boolean"
            },
            "createManagement": {
              "type": "boolean"
            },
            "createRelease": {
              "type": "boolean"
            },
            "affinity": {
              "type": "object"
            },
            "nodeSelector": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "tolerations": {
              "type": "array",
              "items": {
                "type": "object"
              }
            }
          }
        },
        "regional": {
          "type": "object",
          "properties": {
            "telemetry": {
              "type": "object",
              "properties": {
                "mode": {
                  "type": "string",
                  "enum": ["disabled", "local", "online"]
                }
              }
            }
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string"
                },
                "memory": {
                  "type": "string"
                }
              }
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string"
                },
                "memory": {
                  "type": "string"
                }
              }
            }
          }
        },
        "issuer": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "selfSigned": {
              "type": "boolean"
            },
            "secret": {
              "type": "object",
              "properties": {
                "create": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "gateway": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "className": {
              "type": "string"
            },
            "listeners": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "port": {
                    "type": "integer"
                  },
                  "protocol": {
                    "type": "string"
                  },
                  "hostname": {
                    "type": "string"
                  },
                  "allowedRoutes": {
                    "type": "object"
                  },
                  "tls": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "enterprise": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "version": {
              "type": "string"
            },
            "templatesRepoURL": {
              "type": "string"
            },
            "globalK0sURL": {
              "type": "string"
            },
            "globalRegistry": {
              "type": "string"
            },
            "release": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "templates": {
                  "type": "object",
                  "properties": {
                    "capi": {
                      "type": "string"
                    },
                    "kcm": {
                      "type": "string"
                    },
                    "regional": {
                      "type": "string"
                    }
                  }
                },
                "providers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "template": {
                        "type": "string"
                      }
                    },
                    "required": ["name", "template"]
                  }
                }
              }
            },
            "ui": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "nextAuth": {
                  "type": "object",
                  "properties": {
                    "secretKeyRef": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "key": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "auth": {
                  "type": "object",
                  "properties": {
                    "basic": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean"
                        },
                        "username": {
                          "type": "string"
                        },
                        "secretKeyRef": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    },
                    "keycloak": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean"
                        },
                        "issuer": {
                          "type": "string"
                        },
                        "secretKeyRef": {
                          "type": "object"
                        }
                      }
                    }
                  }
                },
                "route": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "kind": {
                      "type": "string"
                    },
                    "hostnames": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "rules": {
                      "type": "array"
                    },
                    "gateways": {
                      "type": "array"
                    }
                  }
                }
              }
            }
          }
        },
        "community": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "version": {
              "type": "string"
            },
            "templatesRepoURL": {
              "type": "string"
            },
            "templates": {
              "type": "object",
              "properties": {
                "capi": {
                  "type": "string"
                },
                "kcm": {
                  "type": "string"
                },
                "regional": {
                  "type": "string"
                }
              }
            },
            "release": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "providers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "template": {
                        "type": "string"
                      }
                    },
                    "required": ["name", "template"]
                  }
                }
              }
            }
          }
        }
      },
      "required": ["type"]
    },
    "management": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "access": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "rules": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "targetNamespaces": {
                    "type": "object"
                  },
                  "credentials": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "clusterTemplateChains": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "serviceTemplateChains": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "providers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              }
            },
            "required": ["name"]
          }
        }
      }
    }
  }
}
