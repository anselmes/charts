{{- $enterprise := (default false .Values.enterprise.enabled) -}}
{{- $community := (default false .Values.community.enabled) -}}
{{- if and $enterprise $community -}}
{{- fail "Mutually exclusive: do not enable both enterprise.enabled and community.enabled." -}}
{{- end -}}

{{- if and .Values.type (or $enterprise $community) -}}
  {{- if and $enterprise (ne .Values.type "enterprise") -}}
  {{- fail "enterprise.enabled=true requires type=enterprise." -}}
  {{- end -}}
  {{- if and $community (ne .Values.type "community") -}}
  {{- fail "community.enabled=true requires type=community." -}}
  {{- end -}}
{{- end -}}
