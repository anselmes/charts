---
# Configuration for OpenEBS - Open Source Container Attached Storage
# OpenEBS provides dynamic local and replicated storage options for Kubernetes
openebs:
  # Enable OpenEBS storage solutions deployment
  # When enabled, deploys OpenEBS operators and storage engines
  enabled: true

  # OpenEBS Custom Resource Definitions (CRDs) configuration
  # These CRDs define the storage resources and behaviors
  openebs-crds:
    csi:
      # CSI Volume Snapshots feature configuration
      # Enables point-in-time snapshots of persistent volumes
      volumeSnapshots:
        enabled: false
        # Retain CRDs during chart uninstallation
        # true: CRDs persist after uninstall, false: CRDs are removed
        keep: false

  # ZFS LocalPV storage engine configuration
  # Provides high-performance local storage using ZFS datasets
  zfs-localpv:
    crds:
      zfsLocalPv:
        # Enable ZFS LocalPV Custom Resource Definitions
        # Required for ZFS-based local persistent volume provisioning
        enabled: true
      csi:
        volumeSnapshots:
          # Enable volume snapshots for ZFS LocalPV
          # Allows creation of point-in-time snapshots of ZFS volumes
          enabled: true

  # LVM LocalPV storage engine configuration
  # Provides local storage using Logical Volume Manager (LVM)
  lvm-localpv:
    crds:
      lvmLocalPv:
        # Enable LVM LocalPV Custom Resource Definitions
        # Required for LVM-based local persistent volume provisioning
        enabled: false
      csi:
        volumeSnapshots:
          # Enable volume snapshots for LVM LocalPV
          # Allows creation of thin-provisioned LVM snapshots
          enabled: true

  # Storage engines configuration
  # Defines which storage backends are enabled for different use cases
  engines:
    local:
      lvm:
        # Enable LVM-based local storage engine
        # Provides block storage using Linux Logical Volume Manager
        enabled: false
      zfs:
        # Enable ZFS-based local storage engine
        # Provides advanced features like compression, deduplication, and snapshots
        enabled: false
    replicated:
      mayastor:
        # Enable Mayastor replicated storage engine
        # High-performance NVMe-over-TCP based replicated storage
        enabled: false

  # LocalPV Provisioner configuration
  # Handles dynamic provisioning of local persistent volumes
  localpv-provisioner:
    analytics:
      # Enable usage analytics collection
      # Helps OpenEBS community understand usage patterns (anonymized)
      enabled: false
    hostpathClass:
      # HostPath storage class configuration
      # Uses host filesystem directories for storage (suitable for single-node)
      enabled: true
      # Storage class name for HostPath volumes
      name: openebs-hostpath
      # Set as default storage class
      # When true, this storage class is used by default for new PVCs
      isDefaultClass: true
    localpv:
      # Enable LocalPV dynamic provisioning
      # Allows automatic creation of local persistent volumes
      enabled: true

# OpenStack Cinder CSI Driver configuration
# Provides block storage integration with OpenStack Cinder volumes
openstack-cinder-csi:
  # Enable Cinder CSI driver deployment
  # Allows Kubernetes to use OpenStack Cinder for persistent storage
  enabled: false
  secret:
    # Enable OpenStack credentials secret
    # Required for authentication with OpenStack cloud services
    enabled: true
    # Mount secret as host volume
    # Alternative to environment variable injection for credentials
    hostMount: false
    # Secret name containing OpenStack configuration
    # Must include cloud.conf with OpenStack authentication details
    name: cinder-csi-cloud-config
  storageClass:
    # Create Cinder storage classes
    # Defines how Kubernetes provisions Cinder volumes with different policies
    enabled: true
    delete:
      # Storage class with Delete reclaim policy
      # Volumes are deleted when PVCs are removed
      isDefault: false
      # Allow online volume expansion
      # Enables resizing of volumes without pod restart
      allowVolumeExpansion: true
    retain:
      # Storage class with Retain reclaim policy
      # Volumes persist after PVCs are deleted (manual cleanup required)
      isDefault: false
      # Allow online volume expansion
      # Enables resizing of volumes without pod restart
      allowVolumeExpansion: true

# Rook Ceph Operator configuration
# Rook orchestrates Ceph storage cluster in Kubernetes environments
rook-ceph:
  # Enable Rook Ceph operator deployment
  # Manages Ceph clusters as Kubernetes native applications
  enabled: false
  # Allow loop devices for storage (testing only)
  # WARNING: Only enable for development/testing environments
  allowLoopDevices: false
  csi:
    # Enable RBD (RADOS Block Device) CSI driver
    # Provides block storage volumes backed by Ceph RBD images
    enableRbdDriver: true
    # Enable CephFS CSI driver
    # Provides shared filesystem volumes backed by Ceph filesystem
    enableCephfsDriver: true
    # Enable CSI volume encryption
    # Encrypts data at rest using dm-crypt
    enableCSIEncryption: false
  crds:
    # Deploy Rook Ceph Custom Resource Definitions
    # Required for Rook to manage Ceph cluster resources
    enabled: true

# Rook Ceph Cluster configuration
# Defines the actual Ceph storage cluster managed by Rook operator
rook-ceph-cluster:
  # Enable Ceph cluster deployment
  # Creates a production-ready Ceph cluster with specified configuration
  enabled: false
  # Rook operator namespace
  # Must match the namespace where Rook operator is deployed
  operatorNamespace: rook-ceph
  toolbox:
    # Enable Ceph toolbox deployment
    # Provides debugging tools and cluster management capabilities
    enabled: false
  cephClusterSpec:
    mon:
      # Number of monitor pods to deploy
      count: 3
      # Allow or disallow multiple monitors per node
      allowMultiplePerNode: false
    mgr:
      # Number of manager pods to deploy
      count: 2
      # Allow or disallow multiple managers per node
      allowMultiplePerNode: false
    dashboard:
      # Enable or disable the Ceph dashboard
      enabled: true
      # Enable or disable SSL for the dashboard
      ssl: true
    storage:
      # Use all nodes for storage
      useAllNodes: true
      # Use all devices for storage
      useAllDevices: true
  cephBlockPools:
    - name: ceph-blockpool
      spec:
        # Failure domain for the block pool
        failureDomain: host
        replicated:
          # Replication size for the block pool
          size: 3
      storageClass:
        # Enable or disable the storage class for the block pool
        enabled: true
        # Name of the storage class
        name: ceph-block
        # Set the storage class as the default
        isDefault: true
  cephFileSystems:
    - name: ceph-filesystem
      spec:
        metadataPool:
          replicated:
            # Replication size for the metadata pool
            size: 3
        dataPools:
          - failureDomain: host
            name: data0
            replicated:
              # Replication size for the data pool
              size: 3
        metadataServer:
          # Number of active metadata servers
          activeCount: 1
          # Enable or disable active-standby mode for metadata servers
          activeStandby: true
      storageClass:
        # Enable or disable the storage class for the filesystem
        enabled: true
        # Set the storage class as the default
        isDefault: false
        # Name of the storage class
        name: ceph-filesystem
        # Name of the data pool
        pool: data0
  cephObjectStores:
    - name: ceph-objectstore
      spec:
        # Preserve pools on deletion
        preservePoolsOnDelete: true
        metadataPool:
          failureDomain: host
          replicated:
            # Replication size for the metadata pool
            size: 3
        dataPool:
          failureDomain: host
          erasureCoded:
            # Number of data chunks for erasure coding
            dataChunks: 2
            # Number of coding chunks for erasure coding
            codingChunks: 1
        gateway:
          # Port for the object store gateway
          port: 80
      storageClass:
        # Enable or disable the storage class for the object store
        enabled: true
        # Name of the storage class
        name: ceph-bucket
        parameters:
          # Region for the object store
          region: us-east-1
  cephBlockPoolsVolumeSnapshotClass:
    # Enable or disable the volume snapshot class for block pools.
    # Set to true to allow snapshots for Ceph block pools.
    enabled: false
    # Name of the volume snapshot class for Ceph block pools.
    # This name will be used to reference the snapshot class in Kubernetes.
    name: ceph-block
    # Set the snapshot class as the default for block pools.
    # If true, this snapshot class will be used by default for block pool snapshots.
    isDefault: false
  cephFileSystemVolumeSnapshotClass:
    # Enable or disable the volume snapshot class for Ceph filesystems.
    # Set to true to allow snapshots for Ceph filesystems.
    enabled: false
    # Name of the volume snapshot class for Ceph filesystems.
    # This name will be used to reference the snapshot class in Kubernetes.
    name: ceph-filesystem
    # Set the snapshot class as the default for filesystems.
    # If true, this snapshot class will be used by default for filesystem snapshots.
    isDefault: true

# VMware vSphere CSI Driver configuration
# Provides persistent storage integration with vSphere infrastructure
vsphere-csi-driver:
  # Enable vSphere CSI driver deployment
  # Allows Kubernetes to use vSphere datastores for persistent volumes
  enabled: false
  vcenterConfig:
    # Enable vCenter configuration
    # Required for authentication and communication with vCenter server
    enabled: false
    # Secret containing vCenter credentials and configuration
    # Must include vcenter server details and authentication information
    secretName: vcenter-config-secret
    # Unique cluster identifier in vSphere environment
    # Used to identify this Kubernetes cluster in vCenter
    clusterID: null
    # vCenter server certificate thumbprint
    # SHA-1 fingerprint for certificate validation (required for secure connections)
    thumbprint: null
    # vCenter server address
    # FQDN or IP address of the vCenter server
    vcenter: null
    # Allow insecure connections to vCenter
    # WARNING: Only use "true" for testing environments with self-signed certificates
    insecure: "true"
    # vCenter authentication username
    # User must have required permissions for datastore and VM operations
    user: null
    # vCenter authentication password
    # Corresponding password for the specified user
    password: null
    # vCenter server port
    # Default HTTPS port for vCenter API communication
    port: 443
    # List of vSphere datacenters
    # Datacenters where the CSI driver can provision storage
    datacenters: null
  defaultStorageClass:
    # Default storage class name
    # Used for automatic volume provisioning when no storage class is specified
    name: vsphere-csi
    # Enable default storage class creation
    # Creates a storage class for vSphere volumes with standard configuration
    enabled: true
    # Allow online volume expansion
    # Enables resizing of persistent volumes without downtime
    allowVolumeExpansion: true

# AWS EBS CSI Driver configuration
# Provides persistent storage using Amazon Elastic Block Store (EBS) volumes
aws-ebs-csi-driver:
  # Enable AWS EBS CSI driver deployment
  # Allows Kubernetes to use AWS EBS volumes for persistent storage
  enabled: false
  # Enable FIPS 140-2 cryptographic compliance
  # Required for government and regulated environments
  fips: false
  # AWS credentials configuration
  # Required for EBS API authentication and authorization
  awsAccessSecret:
    # Secret name containing AWS credentials
    name: aws-secret
    # AWS Access Key ID field name in secret
    keyId: key_id
    # AWS Secret Access Key field name in secret
    accessKey: access_key
  controller:
    # Default filesystem type for EBS volumes
    # Used when no fsType is specified in storage class
    defaultFsType: ext4
    # AWS region for EBS operations
    # Must match the region where Kubernetes cluster is deployed
    region:
  # Custom storage classes for different EBS volume types
  # Define multiple storage classes with specific EBS configurations
  storageClasses: []
  # Example storage class configuration:
  # - name: ebs-sc
  #   # Storage class annotations
  #   annotations:
  #     storageclass.kubernetes.io/is-default-class: "true"
  #   # Storage class labels
  #   labels:
  #     my-label-is: supercool
  #   # Volume binding mode (WaitForFirstConsumer recommended for topology awareness)
  #   volumeBindingMode: WaitForFirstConsumer
  #   # Reclaim policy for volumes (Delete or Retain)
  #   reclaimPolicy: Retain
  #   # EBS-specific parameters
  #   parameters:
  #     encrypted: "true"
  defaultStorageClass:
    # Enable default EBS storage class creation
    # Creates a general-purpose storage class for EBS volumes
    enabled: false
