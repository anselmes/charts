{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Operator Chart Values",
  "description": "Schema for operator chart values that deploys various Operators and their dependencies",
  "type": "object",
  "properties": {
    "postgres": {
      "type": "object",
      "description": "PostgreSQL operator configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable PostgreSQL operator deployment"
        },
        "operatorImageRepository": {
          "type": "string",
          "description": "PostgreSQL operator image repository"
        },
        "watchAllNamespaces": {
          "type": "boolean",
          "description": "Set if operator should be deployed in cluster wide mode"
        },
        "resources": {
          "type": "object",
          "description": "Resource limits and requests",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "nodeSelector": {
          "type": "object",
          "description": "Node labels for pod assignment"
        },
        "tolerations": {
          "type": "array",
          "description": "Tolerations for pod assignment",
          "items": {
            "type": "object"
          }
        },
        "affinity": {
          "type": "object",
          "description": "Affinity for pod assignment"
        },
        "disableTelemetry": {
          "type": "boolean",
          "description": "Disable telemetry collection"
        }
      },
      "additionalProperties": false
    },
    "redis": {
      "type": "object",
      "description": "Redis operator configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable Redis operator deployment"
        },
        "redisOperator": {
          "type": "object",
          "description": "Redis operator specific configuration",
          "properties": {
            "name": {
              "type": "string",
              "description": "Redis operator name"
            },
            "imageName": {
              "type": "string",
              "description": "Redis operator image name"
            },
            "imageTag": {
              "type": "string",
              "description": "Redis operator image tag"
            },
            "initContainerImageTag": {
              "type": "string",
              "description": "Init container image tag"
            },
            "imagePullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "description": "Image pull policy"
            },
            "imagePullSecrets": {
              "type": "array",
              "description": "Image pull secrets",
              "items": {
                "type": "object"
              }
            },
            "metrics": {
              "type": "object",
              "description": "Metrics configuration for monitoring",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "description": "Enable metrics server"
                },
                "bindAddress": {
                  "type": "string",
                  "description": "The address the metrics endpoint binds to"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "resources": {
          "type": "object",
          "description": "Resource limits and requests",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "issuer": {
          "type": "object",
          "description": "Certificate issuer configuration",
          "properties": {
            "create": {
              "type": "boolean",
              "description": "Whether to create the issuer or not"
            },
            "kind": {
              "type": "string",
              "enum": ["Issuer", "ClusterIssuer"],
              "description": "Type of issuer (namespaced or global)"
            },
            "type": {
              "type": "string",
              "description": "Issuer type"
            },
            "name": {
              "type": "string",
              "description": "Issuer name"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "Email for certificate registration"
            },
            "server": {
              "type": "string",
              "format": "uri",
              "description": "ACME server URL"
            },
            "privateKeySecretName": {
              "type": "string",
              "description": "Private key secret name"
            },
            "solver": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "ingressClass": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "certmanager": {
          "type": "object",
          "description": "Cert-manager configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Whether to use cert-manager for certificate management"
            },
            "apiVersion": {
              "type": "string",
              "description": "API version of the cert-manager CRDs"
            }
          },
          "additionalProperties": false
        },
        "nodeSelector": {
          "type": "object",
          "description": "Node labels for pod assignment"
        },
        "tolerateAllTaints": {
          "type": "boolean",
          "description": "Whether to tolerate all taints"
        },
        "tolerations": {
          "type": "array",
          "description": "Tolerations for pod assignment",
          "items": {
            "type": "object"
          }
        },
        "affinity": {
          "type": "object",
          "description": "Affinity for pod assignment"
        }
      },
      "additionalProperties": false
    },
    "mysql": {
      "type": "object",
      "description": "MySQL operator configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable MySQL operator deployment"
        },
        "image": {
          "type": "object",
          "description": "MySQL operator image configuration",
          "properties": {
            "repository": {
              "type": "string",
              "description": "Container image repository"
            },
            "tag": {
              "type": "string",
              "description": "Container image tag"
            },
            "pullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "description": "Image pull policy"
            }
          },
          "additionalProperties": false
        },
        "watchAllNamespaces": {
          "type": "boolean",
          "description": "Set if operator should be deployed in cluster wide mode"
        },
        "resources": {
          "type": "object",
          "description": "Resource limits and requests",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "nodeSelector": {
          "type": "object",
          "description": "Node labels for pod assignment"
        },
        "tolerations": {
          "type": "array",
          "description": "Tolerations for pod assignment",
          "items": {
            "type": "object"
          }
        },
        "affinity": {
          "type": "object",
          "description": "Affinity for pod assignment"
        },
        "disableTelemetry": {
          "type": "boolean",
          "description": "Disable telemetry collection"
        }
      },
      "additionalProperties": false
    },
    "mongo": {
      "type": "object",
      "description": "MongoDB operator configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable MongoDB operator deployment"
        },
        "image": {
          "type": "object",
          "description": "MongoDB operator image configuration",
          "properties": {
            "repository": {
              "type": "string",
              "description": "Container image repository"
            },
            "tag": {
              "type": "string",
              "description": "Container image tag"
            },
            "pullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "description": "Image pull policy"
            }
          },
          "additionalProperties": false
        },
        "disableTelemetry": {
          "type": "boolean",
          "description": "Disable telemetry collection"
        },
        "watchAllNamespaces": {
          "type": "boolean",
          "description": "Set if operator should be deployed in cluster wide mode"
        },
        "podSecurityContext": {
          "type": "object",
          "description": "Pod security context configuration",
          "properties": {
            "runAsNonRoot": {
              "type": "boolean"
            },
            "runAsUser": {
              "type": "integer",
              "minimum": 0
            },
            "runAsGroup": {
              "type": "integer",
              "minimum": 0
            },
            "fsGroup": {
              "type": "integer",
              "minimum": 0
            },
            "fsGroupChangePolicy": {
              "type": "string",
              "enum": ["OnRootMismatch", "Always"]
            }
          },
          "additionalProperties": false
        },
        "securityContext": {
          "type": "object",
          "description": "Security context configuration",
          "properties": {
            "allowPrivilegeEscalation": {
              "type": "boolean"
            },
            "capabilities": {
              "type": "object",
              "properties": {
                "drop": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "seccompProfile": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "resources": {
          "type": "object",
          "description": "Resource limits and requests",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "pattern": "^[0-9]+m?$|^[0-9]*\\.?[0-9]+$"
                },
                "memory": {
                  "type": "string",
                  "pattern": "^[0-9]+[KMGTPE]?i?$"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "nodeSelector": {
          "type": "object",
          "description": "Node labels for pod assignment"
        },
        "tolerations": {
          "type": "array",
          "description": "Tolerations for pod assignment",
          "items": {
            "type": "object"
          }
        },
        "affinity": {
          "type": "object",
          "description": "Affinity for pod assignment"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
