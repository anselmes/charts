{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Gateway API Helm Chart Values Schema",
  "description": "Schema for validating values.yaml configuration for the Gateway API Helm chart",
  "properties": {
    "envoy": {
      "type": "object",
      "title": "Envoy Gateway Configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Envoy Gateway",
          "description": "Enable or disable Envoy Gateway deployment",
          "default": true
        },
        "proxies": {
          "type": "array",
          "title": "Envoy Proxies",
          "description": "List of Envoy proxy configurations",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "title": "Proxy Name"
              },
              "mergeGateways": {
                "type": "boolean",
                "title": "Merge Gateways"
              },
              "logging": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "object",
                    "properties": {
                      "default": {
                        "type": "string",
                        "enum": ["debug", "info", "warn", "error"]
                      }
                    },
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          "default": []
        },
        "classes": {
          "type": "array",
          "title": "Gateway Classes",
          "description": "List of gateway classes to create",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "title": "Gateway Class Name"
              },
              "description": {
                "type": "string",
                "title": "Gateway Class Description"
              },
              "controllerName": {
                "type": "string",
                "title": "Controller Name"
              },
              "labels": {
                "type": "object",
                "title": "Labels",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "annotations": {
                "type": "object",
                "title": "Annotations",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "parametersRef": {
                "type": "object",
                "title": "Parameters Reference",
                "properties": {
                  "group": {
                    "type": "string"
                  },
                  "kind": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "namespace": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "required": ["name"],
            "additionalProperties": false
          },
          "default": []
        },
        "deployment": {
          "type": "object",
          "title": "Deployment Configuration",
          "properties": {
            "envoyGateway": {
              "type": "object",
              "properties": {
                "image": {
                  "type": "object",
                  "properties": {
                    "repository": {
                      "type": "string",
                      "title": "Image Repository"
                    },
                    "tag": {
                      "type": "string",
                      "title": "Image Tag"
                    }
                  },
                  "additionalProperties": false
                },
                "imagePullPolicy": {
                  "type": "string",
                  "enum": ["Always", "IfNotPresent", "Never", ""],
                  "title": "Image Pull Policy"
                },
                "imagePullSecrets": {
                  "type": "array",
                  "title": "Image Pull Secrets",
                  "items": {
                    "type": "object"
                  }
                },
                "resources": {
                  "type": "object",
                  "title": "Resource Limits and Requests",
                  "properties": {
                    "limits": {
                      "type": "object",
                      "properties": {
                        "memory": {
                          "type": "string",
                          "pattern": "^[0-9]+(Mi|Gi|Ki|m)?$"
                        },
                        "cpu": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    },
                    "requests": {
                      "type": "object",
                      "properties": {
                        "memory": {
                          "type": "string",
                          "pattern": "^[0-9]+(Mi|Gi|Ki|m)?$"
                        },
                        "cpu": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "additionalProperties": false
                },
                "securityContext": {
                  "$ref": "#/definitions/securityContext"
                }
              },
              "additionalProperties": false
            },
            "ports": {
              "type": "array",
              "title": "Service Ports",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "port": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 65535
                  },
                  "targetPort": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 65535
                  }
                },
                "required": ["name", "port", "targetPort"],
                "additionalProperties": false
              }
            },
            "priorityClassName": {
              "type": ["string", "null"],
              "title": "Priority Class Name"
            },
            "replicas": {
              "type": "integer",
              "minimum": 1,
              "title": "Number of Replicas",
              "default": 1
            },
            "pod": {
              "type": "object",
              "title": "Pod Configuration",
              "properties": {
                "affinity": {
                  "type": "object",
                  "title": "Pod Affinity Rules"
                },
                "annotations": {
                  "type": "object",
                  "title": "Pod Annotations",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "labels": {
                  "type": "object",
                  "title": "Pod Labels",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "topologySpreadConstraints": {
                  "type": "array",
                  "title": "Topology Spread Constraints"
                },
                "tolerations": {
                  "type": "array",
                  "title": "Pod Tolerations"
                },
                "nodeSelector": {
                  "type": "object",
                  "title": "Node Selector",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "annotations": {
              "type": "object",
              "title": "Deployment Annotations",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "service": {
          "type": "object",
          "title": "Service Configuration",
          "properties": {
            "trafficDistribution": {
              "type": "string",
              "title": "Traffic Distribution Policy",
              "enum": ["", "PreferClose"]
            },
            "annotations": {
              "type": "object",
              "title": "Service Annotations",
              "additionalProperties": {
                "type": "string"
              }
            },
            "type": {
              "type": "string",
              "title": "Service Type",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
            }
          },
          "additionalProperties": false
        },
        "hpa": {
          "type": "object",
          "title": "Horizontal Pod Autoscaler",
          "properties": {
            "enabled": {
              "type": "boolean",
              "title": "Enable HPA",
              "default": false
            },
            "minReplicas": {
              "type": "integer",
              "minimum": 1,
              "title": "Minimum Replicas",
              "default": 1
            },
            "maxReplicas": {
              "type": "integer",
              "minimum": 1,
              "title": "Maximum Replicas",
              "default": 1
            },
            "metrics": {
              "type": "array",
              "title": "HPA Metrics"
            },
            "behavior": {
              "type": "object",
              "title": "HPA Behavior"
            }
          },
          "additionalProperties": false
        },
        "config": {
          "type": "object",
          "title": "Envoy Gateway Configuration",
          "properties": {
            "envoyGateway": {
              "type": "object",
              "properties": {
                "gateway": {
                  "type": "object",
                  "properties": {
                    "controllerName": {
                      "type": "string",
                      "title": "Gateway Controller Name",
                      "default": "gateway.envoyproxy.io/gatewayclass-controller"
                    }
                  },
                  "additionalProperties": false
                },
                "provider": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["Kubernetes"],
                      "title": "Provider Type",
                      "default": "Kubernetes"
                    }
                  },
                  "additionalProperties": false
                },
                "logging": {
                  "type": "object",
                  "properties": {
                    "level": {
                      "type": "object",
                      "properties": {
                        "default": {
                          "type": "string",
                          "enum": ["debug", "info", "warn", "error"],
                          "title": "Default Log Level",
                          "default": "info"
                        }
                      },
                      "additionalProperties": {
                        "type": "string"
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "extensionApis": {
                  "type": "object",
                  "title": "Extension APIs"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "createNamespace": {
          "type": "boolean",
          "title": "Create Namespace",
          "default": false
        },
        "kubernetesClusterDomain": {
          "type": "string",
          "title": "Kubernetes Cluster Domain",
          "default": "cluster.local"
        },
        "certgen": {
          "type": "object",
          "title": "Certificate Generation Configuration",
          "properties": {
            "job": {
              "type": "object",
              "properties": {
                "annotations": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "args": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "resources": {
                  "type": "object"
                },
                "affinity": {
                  "type": "object"
                },
                "tolerations": {
                  "type": "array"
                },
                "nodeSelector": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "ttlSecondsAfterFinished": {
                  "type": "integer",
                  "minimum": 0,
                  "default": 30
                },
                "securityContext": {
                  "$ref": "#/definitions/securityContext"
                },
                "pod": {
                  "type": "object",
                  "title": "Certgen Job Pod Configuration",
                  "additionalProperties": true
                }
              },
              "additionalProperties": false
            },
            "rbac": {
              "type": "object",
              "properties": {
                "annotations": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "labels": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "topologyInjector": {
          "type": "object",
          "title": "Topology Injector Configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "title": "Enable Topology Injector",
              "default": true
            },
            "annotations": {
              "type": "object",
              "title": "Topology Injector Annotations",
              "additionalProperties": {
                "type": "string"
              }            },
            "type": {
              "type": "string",
              "title": "Service Type",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]            }
          },
          "additionalProperties": false
        },
        "global": {
          "type": "object",
          "title": "Global Configuration",
          "additionalProperties": true
        },
        "podDisruptionBudget": {
          "type": "object",
          "title": "Pod Disruption Budget",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    },
    "nginx": {
      "type": "object",
      "title": "NGINX Gateway Fabric Configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable NGINX Gateway",
          "default": false
        },
        "nginx": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "nginxGateway": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "title": "NGINX Gateway Name"
                },
                "gatewayClassName": {
                  "type": "string",
                  "title": "Gateway Class Name",
                  "default": "nginx"
                },
                "gwAPIExperimentalFeatures": {
                  "type": "object",
                  "properties": {
                    "enable": {
                      "type": "boolean",
                      "default": false
                    }
                  },
                  "additionalProperties": false
                },
                "gwAPIInferenceExtension": {
                  "type": "object",
                  "properties": {
                    "enable": {
                      "type": "boolean",
                      "default": false
                    }
                  },
                  "additionalProperties": false
                },
                "snippetsFilters": {
                  "type": "object",
                  "properties": {
                    "enable": {
                      "type": "boolean",
                      "default": false
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "traefik": {
      "type": "object",
      "title": "Traefik Gateway Configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Traefik Gateway",
          "default": false
        },
        "ingressClass": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": false
        },
        "experimental": {
          "type": "object",
          "properties": {
            "kubernetesGateway": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                }
              },
              "additionalProperties": false
            },
            "knative": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": false
        },
        "gateway": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": false
        },
        "gatewayClass": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "name": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "providers": {
          "type": "object",
          "properties": {
            "kubernetesCRD": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                }
              },
              "additionalProperties": false
            },
            "kubernetesIngress": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                }
              },
              "additionalProperties": false
            },
            "kubernetesGateway": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "experimentalChannel": {
                  "type": "boolean",
                  "default": false
                }
              },
              "additionalProperties": false
            },
            "knative": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "ports": {
          "type": "object",
          "properties": {
            "web": {
              "type": "object",
              "properties": {
                "port": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "default": 80
                },
                "exposedPort": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "default": 80
                }
              },
              "additionalProperties": false
            },
            "websecure": {
              "type": "object",
              "properties": {
                "port": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "default": 443
                },
                "exposedPort": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "default": 443
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "definitions": {
    "securityContext": {
      "type": "object",
      "title": "Security Context",
      "properties": {
        "allowPrivilegeEscalation": {
          "type": "boolean"
        },
        "capabilities": {
          "type": "object",
          "properties": {
            "drop": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "add": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "privileged": {
          "type": "boolean"
        },
        "runAsNonRoot": {
          "type": "boolean"
        },
        "runAsGroup": {
          "type": "integer",
          "minimum": 0
        },
        "runAsUser": {
          "type": "integer",
          "minimum": 0
        },
        "readOnlyRootFilesystem": {
          "type": "boolean"
        },
        "seccompProfile": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["RuntimeDefault", "Unconfined"]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
